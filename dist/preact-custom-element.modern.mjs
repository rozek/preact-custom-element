import{h as t,hydrate as e,render as n,cloneElement as o}from"preact";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},r.apply(this,arguments)}const s=["context","children"];function i(t,e,n,o){function r(){const e=Reflect.construct(HTMLElement,[],r);return e._vdomComponent=t,e._root=o&&o.shadow?e.attachShadow({mode:o.mode||"open"}):e,e}return(r.prototype=Object.create(HTMLElement.prototype)).constructor=r,r.prototype.connectedCallback=c,r.prototype.attributeChangedCallback=p,r.prototype.disconnectedCallback=u,n=n||t.observedAttributes||Object.keys(t.propTypes||{}),r.observedAttributes=n,n.forEach(t=>{Object.defineProperty(r.prototype,t,{get(){return this._vdom.props[t]},set(e){this._vdom?this.attributeChangedCallback(t,null,e):(this._props||(this._props={}),this._props[t]=e,this.connectedCallback());const n=typeof e;null!=e&&"string"!==n&&"boolean"!==n&&"number"!==n||this.setAttribute(t,e)}})}),customElements.define(e||t.tagName||t.displayName||t.name,r)}function a(t){this.getChildContext=()=>t.context;const{children:e}=t,n=function(t,e){if(null==t)return{};var n,o,r={},s=Object.keys(t);for(o=0;o<s.length;o++)e.indexOf(n=s[o])>=0||(r[n]=t[n]);return r}(t,s);return o(e,n)}function c(){const o=new CustomEvent("_preact",{detail:{},bubbles:!0,cancelable:!0});this.dispatchEvent(o),this._vdom=t(a,r({},this._props,{context:o.detail.context}),d(this,this._vdomComponent)),(this.hasAttribute("hydrate")?e:n)(this._vdom,this._root)}function l(t){return t.replace(/-(\w)/g,(t,e)=>e?e.toUpperCase():"")}function p(t,e,r){if(!this._vdom)return;const s={};s[t]=r=null==r?void 0:r,s[l(t)]=r,this._vdom=o(this._vdom,s),n(this._vdom,this._root)}function u(){n(this._vdom=null,this._root)}function h(e,n){return t("slot",r({},e,{ref:t=>{t?(this.ref=t,this._listener||(this._listener=t=>{t.stopPropagation(),t.detail.context=n},t.addEventListener("_preact",this._listener))):this.ref.removeEventListener("_preact",this._listener)}}))}function d(e,n){if(3===e.nodeType)return e.data;if(1!==e.nodeType)return null;let o=[],r={},s=0,i=e.attributes,a=e.childNodes;for(s=i.length;s--;)"slot"!==i[s].name&&(r[i[s].name]=i[s].value,r[l(i[s].name)]=i[s].value);for(s=a.length;s--;){const e=d(a[s],null),n=a[s].slot;n?r[n]=t(h,{name:n},e):o[s]=e}const c=n?t(h,null,o):o;return t(n||e.nodeName.toLowerCase(),r,c)}export{i as default};
//# sourceMappingURL=preact-custom-element.modern.mjs.map
